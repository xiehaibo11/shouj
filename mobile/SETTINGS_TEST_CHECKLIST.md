# 设置功能测试清单 ✅

## 🧪 快速测试步骤

### 1️⃣ 打开设置页面
- [ ] 点击右上角 `⋮` 菜单
- [ ] 点击"设置"选项
- [ ] 设置页面正常弹出显示

---

## ✅ 系统设置（4项）

- [ ] **TUN模式** - 开关可切换，显示"虚拟网卡已启用/已禁用"
- [ ] **系统代理** - 开关可切换，显示"已接管/未接管系统网络"
- [ ] **开机自启** - 开关可切换，显示"开机时自动启动应用"
- [ ] **静默启动** - 开关可切换，显示"启动时最小化到托盘"

---

## ✅ Clash 设置（5项）

- [ ] **局域网连接** - 开关可切换，显示"允许局域网设备连接"
- [ ] **DNS 覆写** - 开关可切换，显示"使用自定义DNS配置"
- [ ] **IPv6 支持** - 开关可切换，显示"已启用IPv6网络"
- [ ] **统一延迟** - 开关可切换，显示"使用TCP延迟测速"
- [ ] **日志等级** - 点击弹出对话框
  - [ ] 显示5个选项: Debug, Info, Warn, Error, Silent
  - [ ] 选择后对话框关闭
  - [ ] 副标题更新为所选等级

---

## ✅ 端口设置（3项）

- [ ] **混合端口** - 点击弹出编辑对话框
  - [ ] 默认显示 "7890"
  - [ ] 可以输入数字
  - [ ] 点击"确定"保存，显示在副标题
  - [ ] 点击"取消"不保存

- [ ] **外部控制** - 点击弹出编辑对话框
  - [ ] 默认显示 "127.0.0.1:9090"
  - [ ] 可以输入地址
  - [ ] 点击"确定"保存
  - [ ] 点击"取消"不保存

- [ ] **网页界面** - 点击后显示"Clash Dashboard"

---

## ✅ Clash 内核（2项）

- [ ] **核心版本** - 显示 "Mihomo 1.18.1"
- [ ] **更新 GeoData** - 显示 "更新地理位置数据库"

---

## ✅ 外观设置（1项）

- [ ] **主题模式** - 点击弹出对话框
  - [ ] 显示3个选项: 跟随系统, 浅色, 深色
  - [ ] 选择后对话框关闭
  - [ ] 副标题更新为所选主题

---

## ✅ 关于（3项）

- [ ] **版本信息** - 显示 "Clash Verge Rev 2.4.3"
- [ ] **GitHub 仓库** - 显示 "github.com/clash-verge-rev"
- [ ] **检查更新** - 显示 "当前已是最新版本"

---

## 📊 测试结果统计

```
总共测试项: 18个设置项 + 4个对话框 = 22项

UI显示:  [ ] / 22
开关功能: [ ] / 9
对话框:   [ ] / 4
持久化:   [ ] / 18 (重启后测试)
```

---

## 🐛 已知问题记录

| 问题 | 严重性 | 状态 |
|------|--------|------|
| 设置不会持久化保存 | ⚠️ 中 | 待实现 |
| 开关不触发实际功能 | ⚠️ 中 | 待实现 |
| 点击"运行代理"崩溃 | 🔴 高 | **需要先配置** |

---

## ✅ 测试通过标准

1. **UI显示** ✅
   - 所有18个设置项正确显示
   - 图标和文字清晰
   - 分组标题正确

2. **交互功能** ⏳
   - 开关可以切换
   - 对话框可以弹出和关闭
   - 副标题实时更新

3. **数据保存** ❌
   - 设置在应用内生效（当前会话）
   - **暂未实现**: 重启后保留设置

---

## 🎯 快速验证命令

在模拟器或设备上测试：

```bash
# 1. 确认应用正在运行
adb -s 127.0.0.1:7555 shell ps | grep clash_verge

# 2. 查看日志（如果有崩溃）
adb -s 127.0.0.1:7555 logcat -d | grep -E "FATAL|crash"

# 3. 截图当前屏幕
adb -s 127.0.0.1:7555 screencap -p /sdcard/screenshot.png
adb -s 127.0.0.1:7555 pull /sdcard/screenshot.png .
```

---

## 📝 测试注意事项

### ⚠️ VPN功能测试前提
在测试"运行代理"前，需要：
1. ✅ 添加至少一个配置文件
2. ✅ 配置文件格式正确
3. ✅ Native库已正确加载
4. ❓ 配置文件路径正确

### 💡 测试建议
- 先测试UI显示和交互
- 不要急着测试VPN连接
- 一次测试一个分组
- 记录任何异常行为

---

## 🔄 下次测试重点

1. **数据持久化** - 实现SharedPreferences后测试
2. **配置联动** - 连接ClashCore后测试
3. **权限请求** - VPN权限、通知权限
4. **错误处理** - 无效输入、网络错误

---

**测试日期**: 2025-11-02  
**应用版本**: 2.4.3-debug  
**测试环境**: MuMu模拟器 (x86_64)

