# 代理页面快速开始

## 📱 使用步骤

### 1️⃣ 导入订阅

在使用代理页面前，需要先导入订阅：

1. 进入**"配置"**页面
2. 点击右上角**"添加"**按钮
3. 选择**"URL订阅"**
4. 输入配置名称和订阅地址
5. 点击**"添加"**

### 2️⃣ 查看代理

导入成功后，切换到**"代理"**页面：

**页面布局**:
```
┌─────────────────────────────────┐
│  代理模式: [规则] [全局] [直连]  │
├─────────────────────────────────┤
│  代理组: [PROXY] [AUTO] [...]   │
├─────────────────────────────────┤
│  组信息  [测速全部]             │
├─────────────────────────────────┤
│  ● 节点1  150ms  [测速]         │
│  ○ 节点2  200ms  [测速]         │
│  ○ 节点3  -      [测速]         │
└─────────────────────────────────┘
```

### 3️⃣ 切换代理模式

**三种模式**:
- **规则模式** (Rule): 根据规则自动选择代理或直连
- **全局模式** (Global): 所有流量走代理
- **直连模式** (Direct): 所有流量直连

**操作**: 点击顶部的模式按钮即可切换

### 4️⃣ 选择代理节点

**操作步骤**:
1. 在代理组标签中选择一个组
2. 在节点列表中点击想要的节点
3. 看到该节点前的圆圈变为 ● 表示已选中

### 5️⃣ 测试节点延迟

**单个测试**:
- 点击节点右侧的测速图标 🏁

**批量测试**:
- 点击顶部的**"测速全部"**按钮
- 等待测试完成，延迟会显示在节点名称旁

**延迟颜色**:
- 🟢 **< 200ms**: 优秀 (绿色)
- 🟡 **200-500ms**: 良好 (橙色)
- ⚪ **> 500ms**: 较慢 (灰色)
- 🔴 **超时**: 失败 (红色)
- 🔵 **直连**: DIRECT节点 (蓝色)

## 📊 节点信息

每个节点卡片显示：

```
● 节点1  150ms  [测速]
  ss • server1.com:443
  ↑       ↑        ↑
  |       |        └─ 端口
  |       └────────── 服务器地址
  └────────────────── 协议类型
```

**协议图标**:
- 🔑 SS/Shadowsocks
- ☁️ VMess
- 🔒 Trojan
- 🌐 HTTP/HTTPS
- 🌍 SOCKS5

## 🎯 代理组类型

### Selector (选择器)
- 手动选择节点
- 最常用的类型

### URLTest (URL测试)
- 自动选择延迟最低的节点
- 定期自动测试

### Fallback (故障转移)
- 按顺序测试节点
- 选择第一个可用的节点

### LoadBalance (负载均衡)
- 流量分散到多个节点
- 提高稳定性

## ⚠️ 常见问题

### Q1: 页面显示"请先在配置页面导入订阅"？
**A**: 需要先在配置页面导入订阅链接，系统会自动下载配置文件。

### Q2: 延迟测试一直失败？
**A**: 可能原因：
- 节点失效
- 网络问题
- 需要先启动VPN服务

### Q3: 切换节点后没反应？
**A**: 当前版本切换功能需要Clash API支持，正在开发中。

### Q4: 看不到节点列表？
**A**: 检查：
1. 配置文件是否正确导入
2. 配置文件中是否有proxies和proxy-groups
3. 配置文件格式是否正确

### Q5: 代理组标签太多，滚动不方便？
**A**: 代理组标签支持横向滚动，可以左右滑动查看所有组。

## 🔧 高级功能

### 1. 按延迟排序 (开发中)
未来版本将支持按延迟排序节点。

### 2. 节点搜索 (开发中)
未来版本将支持搜索节点名称。

### 3. 链式代理 (开发中)
未来版本将支持桌面端的链式代理功能。

## 💡 使用技巧

### 技巧1: 定期测速
建议每次使用前测速一次，确保选择延迟最低的节点。

### 技巧2: 规则模式优先
推荐使用规则模式，既能访问国外网站，又不影响国内网站速度。

### 技巧3: 备用节点
为每个代理组测速后，记住几个延迟较低的节点作为备用。

### 技巧4: 全局模式谨慎使用
全局模式会让所有流量走代理，可能导致国内网站变慢。

## 📱 界面说明

### 顶部卡片
- 显示当前代理模式
- 提供模式切换按钮
- 使用醒目的颜色标识

### 代理组标签
- 横向滚动标签栏
- 显示组名和节点数量
- 选中组用粗体显示

### 组信息卡片
- 显示组名称和类型
- 显示当前选中的节点
- 提供批量测速按钮

### 节点列表
- 虚拟滚动，流畅显示大量节点
- 卡片式设计，信息清晰
- 选中状态明显标识

## 🎨 自定义配置示例

### 标准订阅配置
```yaml
proxies:
  - name: "节点1"
    type: ss
    server: server1.com
    port: 443
    cipher: aes-256-gcm
    password: "password"
    
  - name: "节点2"
    type: vmess
    server: server2.com
    port: 443
    # ... 其他配置

proxy-groups:
  - name: "PROXY"
    type: select
    proxies:
      - 节点1
      - 节点2
      - DIRECT
      
  - name: "AUTO"
    type: url-test
    proxies:
      - 节点1
      - 节点2
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
```

## 📈 性能提示

### 流畅滚动
- 使用LazyColumn虚拟滚动
- 只渲染可见区域
- 支持大量节点不卡顿

### 并发测速
- 批量测速时多个节点同时测试
- 使用协程不阻塞UI
- 实时更新测试结果

### 智能缓存
- 配置数据缓存在内存
- 减少重复解析
- 提高响应速度

---

**祝使用愉快！** 🎉

如有问题，请查看 [PROXY_SCREEN_IMPLEMENTATION.md](./PROXY_SCREEN_IMPLEMENTATION.md) 获取详细技术文档。

